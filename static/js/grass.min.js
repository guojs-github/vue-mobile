var grass;(grass=grass||{}).browser={BROWSER_TYPE:{UNKNOWN:"Unknown",OPERA:"Opera",FIREFOX:"Firefox",CHROME:"Chrome",SAFARI:"Safari",EDGE:"Edge",WEIXIN:"Weixin",IE:"IE"},type:function(){console.log("Browser type");var e=navigator.userAgent,t=-1<e.indexOf("Opera"),o=-1<e.indexOf("compatible")&&-1<e.indexOf("MSIE")&&!t,n=-1<e.indexOf("Trident")&&-1<(-1<e.indexOf("rv"))&&!o,r=-1<e.indexOf("Edge")&&!n,s=-1<e.toLowerCase().indexOf("micromessenger"),i=-1<e.indexOf("Firefox"),l=-1<e.indexOf("Safari")&&-1==e.indexOf("Chrome")&&!s,a=-1<e.indexOf("Chrome")&&-1<e.indexOf("Safari")&&!s,c=null;try{return o?(new RegExp("MSIE (\\d+\\.\\d+);").test(e),7<=(c=parseFloat(RegExp.$1))&&c<=11?this.BROWSER_TYPE.IE+c:this.BROWSER_TYPE.IE):n?this.BROWSER_TYPE.IE+"11":r?this.BROWSER_TYPE.EDGE:t?this.BROWSER_TYPE.OPERA:i?this.BROWSER_TYPE.FIREFOX:l?this.BROWSER_TYPE.SAFARI:a?this.BROWSER_TYPE.CHROME:s?this.BROWSER_TYPE.WEIXIN:this.BROWSER_TYPE.UNKNOWN}catch(e){throw e}finally{c=a=l=i=r=o=t=e=null}},isIE:function(){console.log("Is ie browser?");var e=this.type();try{return-1<e.indexOf(this.BROWSER_TYPE.IE)}catch(e){throw e}finally{e=null}},availHeight:function(){var e=40,t=0;try{return this.type(),this.isIE()?(t=108,screen.availHeight-t):(this.BROWSER_TYPE.CHROME,t=90,screen.availHeight-e-t)}catch(e){throw e}finally{t=e=null}}},(grass=grass||{}).common={initialize:function(){console.log("Initialize 4 grass library."),"grass"in window&&grass.string.initialize()},queryString:function(e){console.log("Get query string."),console.log("key:"+e);var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i"),o=window.location.search.substr(1).match(t),n="";return null!=o&&(n=o[2]),(o=t=null)==n||""==n||"undefined"==n?"":n},extend:function(e){if(console.log("Extend objects."),"function"==typeof Array.isArray&&!Array.isArray(e))return{};for(var t={},o=0;o<e.length;o++)for(var n in e[o])t[n]=e[o][n];return t},checkMobile:function(e){return console.log("Check mobile phone number."),console.log("value:"+e),/^[1][3,4,5,6,7,8,9][0-9]{9}$/.test(e)},stopBubble:function(e){console.log("Stop bubble"),e&&e.stopPropagation?e.stopPropagation():window.event.cancelBubble=!0},isEmptyString:function(e){return"string"!=typeof e||null==e||""==e.trim()},isObject:function(e){return"object"==typeof e&&null!=e},isId:function(e){return!("number"!=typeof e||null==e||isNaN(e)||e<=0)},isFunction:function(e){return"function"==typeof e&&null!=e},isInteger:function(e){var t;try{return t=parseInt(e),!isNaN(t)}catch(e){return!1}finally{t=null}}},(grass=grass||{}).cookie=new function(){var o="/",n=function(){var e={},t=document.cookie;if(console.log("cookie:"+t),""===t)return e;for(var o=t.split("; "),n=0;n<o.length;n++){var r=o[n],s=r.indexOf("="),i=r.substring(0,s),l=r.substring(s+1);l=decodeURIComponent(l),e[i]=l}return e}();var r=[];for(var e in n)r.push(e);this.length=r.length,this.key=function(e){return console.log("Get specified cookie;"),console.log("n:"+e),e<0||e>=r.length?null:r[e]},this.setItem=function(e,t){console.log("Set cookie."),console.log("key:"+e),console.log("value:"+t),e in n||(r.push(e),this.length++),n[e]=t;var o=e+"="+encodeURIComponent(t);o+="; max-age="+864e5,o+="; path=/",document.cookie=o},this.getItem=function(e){return console.log("Get cookie."),console.log("key:"+e),void 0===n[e]||null==n[e]?"":n[e]},this.removeItem=function(e){if(console.log("Remove cookie."),console.log("key:"+e),e in n){delete n[e];for(var t=0;t<r.length;t++)if(r[t]===e){r.splice(t,1);break}this.length--,document.cookie=e+"=; max-age=0; path="+o}},this.clear=function(){console.log("Clear cookie.");for(var e=0;e<r.length;e++)document.cookie=r[e]+"=; max-age=0; path="+o;n={},r=[],this.length=0}},(grass=grass||{}).number={formatAmount:function(e,t){var o=e;if(e<0&&(e=0-e),/[^0-9\.]/.test(e))return"0.00";if(null==e||"null"==e||""==e)return"0.00";0<t&&(e=new Number(e).toFixed(t)),e=(e=((e=e.toString().replace(/^(\d*)$/,"$1."))+"00").replace(/(\d*\.\d\d)\d*/,"$1")).replace(".",",");for(var n=/(\d)(\d{3},)/;n.test(e);)e=e.replace(n,"$1,$2");if(e=e.replace(/,(\d\d)$/,".$1"),0==t){var r=e.split(".");"00"==r[1]&&(e=r[0])}return o=o<0?"("+e+")":e}},(grass=grass||{}).request={requestTimeout:3e3,post:function(e,t,o,n,r){console.log("Send a post request."),console.log("url:"+e),console.log("param:"+JSON.stringify(t));var s=this.requestTimeout;"number"==typeof r&&0<r&&(s=r);var i=grass.style.loading;i.show(),jQuery.support.cors=!0;var l=$.ajax({url:e,type:"POST",contentType:"application/x-www-form-urlencoded",data:JSON.stringify(t),cache:!1,timeout:s,dataType:"json",error:function(e,t,o){console.log("Request fail."),console.log("request:"+JSON.stringify(e)),console.log("status:"+JSON.stringify(t)),console.log("err:"+JSON.stringify(o)),"function"==typeof n&&n(e,t,o)},success:function(e){console.log("Request success"),console.log("data:"+JSON.stringify(e)),"function"==typeof o&&o(e)},complete:function(e,t){i.hide(),"timeout"==t&&l.abort()}})},get:function(e,t,n,o){console.log("Send a get request."),console.log("url:"+e);var r=this.requestTimeout;"number"==typeof o&&0<o&&(r=o);var s=grass.style.loading;s.show();var i=$.ajax({url:e,type:"GET",cache:!1,timeout:r,dataType:"json",error:function(e,t,o){console.log("Request fail."),console.log("request:"+JSON.stringify(e)),console.log("status:"+JSON.stringify(t)),console.log("err:"+JSON.stringify(o)),"function"==typeof n&&n(e,t,o)},success:function(e){console.log("Request success"),console.log("data:"+JSON.stringify(e)),"function"==typeof t&&t(e)},complete:function(e,t){s.hide(),"timeout"==t&&i.abort()}})}},(grass=grass||{}).storage=new function(){var o;o=window.localStorage?window.localStorage:require("./cookie.js")(),this.setItem=function(e,t){o.setItem(e,t)},this.getItem=function(e){var t=o.getItem(e);return void 0===t||null==t?"":t},this.removeItem=function(e){o.removeItem(e)},this.clear=function(){o.clear()}},(grass=grass||{}).string={initialize:function(){console.log("Initialize 4 string library."),this.trim()},trim:function(){console.log("Add trim routines."),"function"!=typeof String.trim&&(String.prototype.trim=function(){return this.replace(/(^\s*)|(\s*$)/g,"")}),"function"!=typeof String.ltrim&&(String.prototype.ltrim=function(){return this.replace(/(^\s*)/g,"")}),"function"!=typeof String.rtrim&&(String.prototype.rtrim=function(){return this.replace(/(\s*$)/g,"")})}},(grass=grass||{}).time={formatDuration:function(e){if(console.log("Format duration:"+e),"number"!=typeof e)return"";if(e<0)return"";var t=e,o=(t-t%3600)/3600,n=((t-=3600*o)-t%60)/60,r="";return 0<o&&(r+=o+"时"),(0<n||0<o)&&(r+=n+"分"),r+=(t-=60*n)+"秒"},formatTime:function(e){if(null==e)return"";if(isNaN(e))return"";var t="";return t+=e.getFullYear(),t+="-",t+=$.trim(""+(e.getMonth()+1)).length<2?"0"+(e.getMonth()+1):e.getMonth()+1,t+="-",t+=$.trim(""+e.getDate()).length<2?"0"+e.getDate():e.getDate(),t+=" ",t+=$.trim(""+e.getHours()).length<2?"0"+e.getHours():e.getHours(),t+=":",t+=$.trim(""+e.getMinutes()).length<2?"0"+e.getMinutes():e.getMinutes()},formatDateString:function(e,t){if(console.log("Format date string"),console.log("dateString:"+e),console.log("sep:"+t),"string"!=typeof e||8!=e.trim().length)return"";var o=e.trim(),n="-";"string"==typeof t&&0<t.trim().length&&(n=t.trim());var r="";return r+=o.substring(0,4),r+=n+o.substring(4,6),r+=n+o.substring(6,8)},addSeconds:function(e,t){if(null==e)return null;if(isNaN(e))return null;if(null==t)return null;if(isNaN(t))return null;var o=e.getTime(),n=new Date;return n.setTime(o+1e3*t),n}},(grass=grass||{}).style=grass.style||{},grass.style.loading={show:function(){console.log("Show loading.");var e=grass.style.style;try{document.body.removeChild(document.querySelector("div.loading"))}catch(e){}var t=document.createElement("div");e.addClass(t,"loading"),document.body.appendChild(t)},hide:function(){console.log("Hide loading.");try{document.body.removeChild(document.querySelector("div.loading"))}catch(e){}}},(grass=grass||{}).style=grass.style||{},grass.style.style={addClass:function(e,t){console.log("Add class name."),console.log("className:"+t);var o=new RegExp(t,"ig"),n=e.className;o.test(n)||(e.className=n+" "+t)},removeClass:function(e,t){console.log("Remove class name."),console.log("className:"+t);var o=new RegExp(t,"ig"),n=e.className;o.test(n)||(e.className=n.replace(t,""))}},(grass=grass||{}).style=grass.style||{},grass.style.toast={show:function(e,t,o){console.log("Show toast."),console.log("message:"+e),console.log("delay:"+t);var n=grass.style.style;try{document.body.removeChild(document.querySelector("div.toast"))}catch(e){}t=t||3e3;var r=document.createElement("div");n.addClass(r,"toast");var s=document.createElement("div");n.addClass(s,"title");var i=document.createTextNode("提示");s.appendChild(i),r.appendChild(s);var l=document.createTextNode(e);r.appendChild(l),r.style["z-index"]=1e4,document.body.appendChild(r),setTimeout(function(){try{document.body.removeChild(r),"function"==typeof o&&o()}catch(e){}},t)}},(grass=grass||{}).third=grass.third||{},grass.third.wx={init:function(e,t,o){console.log("Initialize wx api."),console.log("param:"+JSON.stringify(e));var n=!1;wx.config({debug:e.debug,appId:e.appId,timestamp:e.timestamp,nonceStr:e.nonceStr,signature:e.signature,jsApiList:e.jsApiList}),wx.ready(function(){console.log("JSAPI ready."),0==n&&"function"==typeof t&&t()}),wx.error(function(e){console.log("JSAPI initialize fail."),n=!0,"function"==typeof o&&o()})},scan:function(t,o){console.log("Scan"),wx.checkJsApi({jsApiList:["scanQRCode"],success:function(e){if(console.log("res:"+JSON.stringify(e)),e.errMsg.indexOf("ok")<0)return console.log("Error occurred:"+e.errMsg),void("function"==typeof o&&o("扫描功能检测失败"));1==e.checkResult.scanQRCode?(console.log("Scan qr code allowed."),wx.scanQRCode({needResult:1,scanType:["qrCode","barCode"],success:function(e){if(console.log("scan res:"+JSON.stringify(e)),e.errMsg.indexOf("ok")<0)return console.log("Error occurred while scan:"+e.errMsg),void("function"==typeof o&&o("扫描功能未获授权"));console.log("scan success"),"function"==typeof t&&t(e.resultStr)}})):(console.log("Scan qr code no allowed."),"function"==typeof o&&o("扫描功能未获授权"))}})}};